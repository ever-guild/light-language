contract Sample2

type State = {
  res: int
}

type ActorMessage = {
  func: (int->int)
}

let accept () =
  assembly "ACCEPT" :> unit ;
  ()
;;

let main (msg:ActorMessage) (st:State) =
  accept () ;
  (* apply function taken from the message to our state variable
     'res' and put the computation result back into the same
     variable *)
  { res = msg.func st.res }
;;
